{"version":3,"file":"js/133.33542fa8.js","mappings":"qTAEO,SAASA,EAASC,GACrB,OAAOC,EAAAA,EAAAA,KAAa,kBAAmB,IAChCD,GAEX,CAMO,SAASE,EAAYF,GAExB,OADAG,QAAQC,IAAIJ,GACLC,EAAAA,EAAAA,KAAa,iBAAkB,IAAID,GAC9C,CAEO,SAASK,EAAoBL,GAChC,OAAOC,EAAAA,EAAAA,KAAa,kBAAmB,IAAID,GAC/C,CAEO,SAASM,EAAOC,GACnB,OAAON,EAAAA,EAAAA,IAAY,mBAAqBM,EAC5C,CAEO,SAASC,EAAQC,EAAMF,GAC1B,OAAON,EAAAA,EAAAA,IAAY,qBAAuBQ,EAAO,MAAOF,EAC5D,CAEO,SAASG,EAAUD,EAAMF,GAC5B,OAAON,EAAAA,EAAAA,IAAY,sBAAwBQ,EAAO,IAAMF,EAC5D,CAEO,SAASI,EAAUJ,GACtB,OAAON,EAAAA,EAAAA,IAAY,qBAAuBM,EAC9C,C,uLCEAK,KAAO,iBAEPC,OAAOC,OAAO,EAAG,GAEjB,MAAMd,EAAOe,EAAAA,EAAAA,QAAAA,cAEPC,GAAUC,EAAAA,EAAAA,IAAI,CAChBC,OAAQlB,EAAKkB,OACbC,UAAW,EACXC,SAAUpB,EAAKoB,SACfC,YAAa,EACbC,MAAOtB,EAAKsB,MAAQ,KAGxBC,EAAAA,EAAAA,KAAU,MACNZ,EAAAA,EAAAA,IAAUX,EAAKwB,QAAQC,MAAK,EAAEC,WAC1BvB,QAAQC,IAAI,UAAUsB,GACtBV,EAAQW,MAAQ,IACTD,EAAKA,KACX,GACH,KAGNpB,EAAAA,EAAAA,IAAON,EAAKwB,QAAQC,MAAK,EAAEC,WACvBvB,QAAQC,IAAIsB,EAAK,IAGrB,MAAME,GAAOC,EAAAA,EAAAA,KAAS,IACX7B,EAAK4B,KAAKE,MAAM,OAGrBC,EAAUA,KACZ,IAAItB,GAAQO,EAAQW,MAAMN,YAAc,GAAK,EAC7ClB,QAAQC,IAAI,UAAWK,GACvBO,EAAQW,MAAMN,YAAcZ,EAC5BO,EAAQW,MAAMP,UAAqB,IAATX,GAAc,EAAI,GAC5CC,EAAAA,EAAAA,IAAUD,EAAKT,EAAKwB,QAAQC,MAAK,EAAEC,WAC/BvB,QAAQC,IAAIsB,EAAK,GACnB,EAGAM,EAAQA,KACV,IAAIvB,GAAQO,EAAQW,MAAMR,UAAY,GAAK,EAC3ChB,QAAQC,IAAI,QAASK,GACrBO,EAAQW,MAAMR,UAAYV,EAC1BO,EAAQW,MAAMT,QAAmB,IAATT,GAAc,EAAI,GAC1CD,EAAAA,EAAAA,IAAQC,EAAKT,EAAKwB,QAAQC,MAAK,EAAEC,WAC7BvB,QAAQC,IAAIsB,EAAK,GACnB,E,gzDC/EN,MAAMO,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://fronted_user/./src/request/post.js","webpack://fronted_user/./src/views/post/PostDetailView.vue","webpack://fronted_user/./src/views/post/PostDetailView.vue?1304"],"sourcesContent":["import request from \"@/request/index\";\r\n\r\nexport function postEdit(post) {\r\n    return request.post(\"/admin/post/add\", {\r\n        ...post\r\n    });\r\n}\r\n\r\nexport function getPost(id) {\r\n    return request.get(\"/post/query/id/\" + id);\r\n}\r\n\r\nexport function getPostList(post) {\r\n    console.log(post)\r\n    return request.post(\"/post/query/or\", {...post});\r\n}\r\n\r\nexport function getPostListByIdList(post){\r\n    return request.post(\"/post/query/and\", {...post});\r\n}\r\n\r\nexport function toLook(id) {\r\n    return request.get(\"/post/user/look/\" + id);\r\n}\r\n\r\nexport function toThumb(flag, id) {\r\n    return request.get(\"/post/user/thumbs/\" + flag + \"/\" + +id);\r\n}\r\n\r\nexport function toCollect(flag, id) {\r\n    return request.get(\"/post/user/collect/\" + flag + \"/\" + id);\r\n}\r\n\r\nexport function getAllNum(id) {\r\n    return request.get(\"/post/user/allnum/\" + id);\r\n}\r\n\r\nexport function getLookIdList(page) {\r\n    return request.post(\"/post/user/ids/look\",{...page});\r\n}\r\n\r\nexport function getCollectIdList(page) {\r\n    return request.post(\"/post/user/ids/collect\",{...page});\r\n}\r\n","<template>\r\n    <el-card v-if=\"post\" class=\"box-card\">\r\n        <template #header>\r\n            <el-descriptions size=\"large\">\r\n                <template #title>\r\n                    <h2>{{ post.title }}</h2>\r\n                </template>\r\n                <el-descriptions-item label=\"作者\">{{post.author}}</el-descriptions-item>\r\n                <el-descriptions-item label=\"更新日期\">{{ new Date(post.updateTime).toLocaleString()}}</el-descriptions-item>\r\n                <el-descriptions-item label=\"标签\" label-align=\"center\">\r\n                    <el-tag v-for=\"(v,i) in tags\" :key=\"i\" style=\"margin-right: 5px\">\r\n                        {{ v }}\r\n                    </el-tag>\r\n                </el-descriptions-item>\r\n                <el-descriptions-item label=\"浏览\" label-align=\"center\">{{ newPost.looks}}</el-descriptions-item>\r\n                <el-descriptions-item label=\"点赞\">\r\n                    <el-button text v-if=\"newPost.thumbFlag === 0\" @click=\"thumb()\">{{ newPost.thumbs }}</el-button>\r\n                    <el-button type=\"primary\" @click=\"thumb()\" v-else>{{ newPost.thumbs }}</el-button>\r\n                </el-descriptions-item>\r\n                <el-descriptions-item label=\"收藏\">\r\n                    <el-button text v-if=\"newPost.collectFlag === 0\" @click=\"collect()\">{{\r\n                        newPost.collects\r\n                        }}\r\n                    </el-button>\r\n                    <el-button type=\"primary\" @click=\"collect()\" v-else>{{ newPost.collects }}</el-button>\r\n                </el-descriptions-item>\r\n            </el-descriptions>\r\n        </template>\r\n        <div v-html=\"post.content\"/>\r\n    </el-card>\r\n</template>\r\n\r\n<script setup>\r\nimport {computed, onMounted, ref} from \"vue\";\r\nimport {getAllNum, toCollect, toLook, toThumb} from \"@/request/post\";\r\nimport store from \"@/store\";\r\n\r\nname = \"PostDetailView\";\r\n\r\nwindow.scroll(0, 0);\r\n\r\nconst post = store.getters.getGlobalPost;\r\n\r\nconst newPost = ref({\r\n    thumbs: post.thumbs,\r\n    thumbFlag: 0,\r\n    collects: post.collects,\r\n    collectFlag: 0,\r\n    looks: post.looks + 1\r\n})\r\n\r\nonMounted(()=>{\r\n    getAllNum(post.postId).then(({data})=>{\r\n        console.log(\"allNums\",data)\r\n        newPost.value = {\r\n            ...data.data\r\n        };\r\n    })\r\n})\r\n\r\ntoLook(post.postId).then(({data})=>{\r\n    console.log(data);\r\n})\r\n\r\nconst tags = computed(() => {\r\n    return post.tags.split(\" \");\r\n})\r\n\r\nconst collect = () => {\r\n    let flag = (newPost.value.collectFlag + 1) % 2;\r\n    console.log(\"collect\", flag);\r\n    newPost.value.collectFlag = flag;\r\n    newPost.value.collects += flag === 0 ? -1 : 1;\r\n    toCollect(flag,post.postId).then(({data})=>{\r\n        console.log(data)\r\n    })\r\n}\r\n\r\nconst thumb = () => {\r\n    let flag = (newPost.value.thumbFlag + 1) % 2;\r\n    console.log(\"thumb\", flag);\r\n    newPost.value.thumbFlag = flag;\r\n    newPost.value.thumbs += flag === 0 ? -1 : 1;\r\n    toThumb(flag,post.postId).then(({data})=>{\r\n        console.log(data)\r\n    })\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.box-card {\r\n    width: 100%;\r\n}\r\n</style>\r\n","import script from \"./PostDetailView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PostDetailView.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./PostDetailView.vue?vue&type=style&index=0&id=57d5d434&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\Users\\\\Mir.Lliao\\\\Desktop\\\\course-2023\\\\JAVAEE企业级应用\\\\post-read\\\\fronted_user\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-57d5d434\"]])\n\nexport default __exports__"],"names":["postEdit","post","request","getPostList","console","log","getPostListByIdList","toLook","id","toThumb","flag","toCollect","getAllNum","name","window","scroll","store","newPost","ref","thumbs","thumbFlag","collects","collectFlag","looks","onMounted","postId","then","data","value","tags","computed","split","collect","thumb","__exports__"],"sourceRoot":""}