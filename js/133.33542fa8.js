"use strict";(self["webpackChunkfronted_user"]=self["webpackChunkfronted_user"]||[]).push([[133],{1422:function(t,e,l){l.d(e,{MS:function(){return i},UI:function(){return u},UR:function(){return r},Uy:function(){return o},X:function(){return a},as:function(){return c},f9:function(){return s}});var n=l(7344);function o(t){return n.Z.post("/admin/post/add",{...t})}function u(t){return console.log(t),n.Z.post("/post/query/or",{...t})}function a(t){return n.Z.post("/post/query/and",{...t})}function r(t){return n.Z.get("/post/user/look/"+t)}function s(t,e){return n.Z.get("/post/user/thumbs/"+t+"/"+ +e)}function c(t,e){return n.Z.get("/post/user/collect/"+t+"/"+e)}function i(t){return n.Z.get("/post/user/allnum/"+t)}},133:function(t,e,l){l.r(e),l.d(e,{default:function(){return w}});var n=l(3396),o=l(4870),u=l(7139),a=l(1422),r=l(4239);const s=["innerHTML"];var c={__name:"PostDetailView",setup(t){name="PostDetailView",window.scroll(0,0);const e=r.Z.getters.getGlobalPost,l=(0,o.iH)({thumbs:e.thumbs,thumbFlag:0,collects:e.collects,collectFlag:0,looks:e.looks+1});(0,n.bv)((()=>{(0,a.MS)(e.postId).then((({data:t})=>{console.log("allNums",t),l.value={...t.data}}))})),(0,a.UR)(e.postId).then((({data:t})=>{console.log(t)}));const c=(0,n.Fl)((()=>e.tags.split(" "))),i=()=>{let t=(l.value.collectFlag+1)%2;console.log("collect",t),l.value.collectFlag=t,l.value.collects+=0===t?-1:1,(0,a.as)(t,e.postId).then((({data:t})=>{console.log(t)}))},d=()=>{let t=(l.value.thumbFlag+1)%2;console.log("thumb",t),l.value.thumbFlag=t,l.value.thumbs+=0===t?-1:1,(0,a.f9)(t,e.postId).then((({data:t})=>{console.log(t)}))};return(t,a)=>{const r=(0,n.up)("el-descriptions-item"),w=(0,n.up)("el-tag"),f=(0,n.up)("el-button"),g=(0,n.up)("el-descriptions"),p=(0,n.up)("el-card");return(0,o.SU)(e)?((0,n.wg)(),(0,n.j4)(p,{key:0,class:"box-card"},{header:(0,n.w5)((()=>[(0,n.Wm)(g,{size:"large"},{title:(0,n.w5)((()=>[(0,n._)("h2",null,(0,u.zw)((0,o.SU)(e).title),1)])),default:(0,n.w5)((()=>[(0,n.Wm)(r,{label:"作者"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,u.zw)((0,o.SU)(e).author),1)])),_:1}),(0,n.Wm)(r,{label:"更新日期"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,u.zw)(new Date((0,o.SU)(e).updateTime).toLocaleString()),1)])),_:1}),(0,n.Wm)(r,{label:"标签","label-align":"center"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,o.SU)(c),((t,e)=>((0,n.wg)(),(0,n.j4)(w,{key:e,style:{"margin-right":"5px"}},{default:(0,n.w5)((()=>[(0,n.Uk)((0,u.zw)(t),1)])),_:2},1024)))),128))])),_:1}),(0,n.Wm)(r,{label:"浏览","label-align":"center"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,u.zw)(l.value.looks),1)])),_:1}),(0,n.Wm)(r,{label:"点赞"},{default:(0,n.w5)((()=>[0===l.value.thumbFlag?((0,n.wg)(),(0,n.j4)(f,{key:0,text:"",onClick:a[0]||(a[0]=t=>d())},{default:(0,n.w5)((()=>[(0,n.Uk)((0,u.zw)(l.value.thumbs),1)])),_:1})):((0,n.wg)(),(0,n.j4)(f,{key:1,type:"primary",onClick:a[1]||(a[1]=t=>d())},{default:(0,n.w5)((()=>[(0,n.Uk)((0,u.zw)(l.value.thumbs),1)])),_:1}))])),_:1}),(0,n.Wm)(r,{label:"收藏"},{default:(0,n.w5)((()=>[0===l.value.collectFlag?((0,n.wg)(),(0,n.j4)(f,{key:0,text:"",onClick:a[2]||(a[2]=t=>i())},{default:(0,n.w5)((()=>[(0,n.Uk)((0,u.zw)(l.value.collects),1)])),_:1})):((0,n.wg)(),(0,n.j4)(f,{key:1,type:"primary",onClick:a[3]||(a[3]=t=>i())},{default:(0,n.w5)((()=>[(0,n.Uk)((0,u.zw)(l.value.collects),1)])),_:1}))])),_:1})])),_:1})])),default:(0,n.w5)((()=>[(0,n._)("div",{innerHTML:(0,o.SU)(e).content},null,8,s)])),_:1})):(0,n.kq)("",!0)}}},i=l(89);const d=(0,i.Z)(c,[["__scopeId","data-v-57d5d434"]]);var w=d}}]);
//# sourceMappingURL=133.33542fa8.js.map